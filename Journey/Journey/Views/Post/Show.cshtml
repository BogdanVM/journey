@model Journey.Models.Post

@{
    ViewBag.Title = "Afisare postare";
}

<h2>@ViewBag.Title</h2>

@if (TempData.ContainsKey("message"))
{
    <h3 class="alert alert-info" role="alert">@TempData["message"]</h3>
}

<div class="panel panel-default">
    @Html.Partial("PostInfo", Model)

    @if (ViewBag.afisareButoane == true && Model.UserId == ViewBag.utilizatorCurent
        || ViewBag.esteAdmin)
    {

        <div class="panel-footer article-panel-footer">
            <a class="btn btn-primary" href="/Post/Edit/@Model.PostId">Modifica postare</a>

            @if (ViewBag.afisareButoane == true && Model.UserId == ViewBag.utilizatorCurent
            || ViewBag.esteAdmin)
            {

                using (Html.BeginForm(actionName: "Delete", controllerName: "Post", method: FormMethod.Post, routeValues: new { id = @Model.PostId }))
                {

                    @Html.HttpMethodOverride(HttpVerbs.Delete)
                    <button class="btn btn-danger" type="submit">Sterge postare</button>

                }
            }
        </div>
    }
</div>

@using (Html.BeginForm(actionName: "New", controllerName: "Comment", routeValues: new { id = Model.PostId }))
{
    <div class="row">
        <input type="text" name="content" class="form-control" />
        <button type="submit" class="btn btn-sm btn-primary"> Posteaza </button>
    </div>

    <br />

    foreach (Journey.Models.Comment comment in ViewBag.Comments)
    {
        @Html.Partial("CommentInfo", comment)
    }

    if (ViewBag.Comments.Count == 0)
    {
        <h3> Nu exista comentarii la aceasta postare </h3>
    }
}